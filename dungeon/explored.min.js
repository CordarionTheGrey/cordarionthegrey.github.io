(function(){var readFile,extractMap,parseMap,appPorts;readFile=function(file,callback){var x$;x$=new FileReader;x$.onload=function(it){callback(it.target.result);};x$.readAsText(file);};extractMap=function(html,callback){var that;if(that=/<div\s[^<>]*?\bid\s*=\s*.?\s*\bd?map\b[\s\S]*?<\/div>\s*<\/div>\s*<\/div>/i.exec(html)){callback(that[0]);}};parseMap=function(html){var doc,i$,ref$,len$,row,line,res$,j$,x$,ref1$,len1$,results$=[];doc=document.createElement('div');doc.innerHTML=html;for(i$=0,len$=(ref$=doc.getElementsByClassName('dml')).length;i$<len$;++i$){row=ref$[i$];res$=[];for(j$=0,len1$=(ref1$=row.getElementsByClassName('dmc')).length;j$<len1$;++j$){x$=ref1$[j$];res$.push(x$.textContent);}
line=res$;results$.push(line.join(""));}
return results$;};appPorts=Elm.Main.embed(document.getElementById('main-wrapper')).ports;appPorts.readFile.subscribe(function(arg$){var inputSelector,outputSelector,input,file;inputSelector=arg$[0],outputSelector=arg$[1];input=document.querySelector(inputSelector);file=input.files[0];if(file==null){return;}
readFile(file,function(html){extractMap(html,function(map){var x$;x$=document.querySelector(outputSelector);x$.value=parseMap(map).join('\n');x$.dispatchEvent(new Event('input'));});});input.value="";});}).call(this);